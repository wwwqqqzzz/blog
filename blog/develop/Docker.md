---
slug: docker-connection-error-solution
title: Dockerè¿æ¥é”™è¯¯è§£å†³
date: 2024-11-08
authors: wqz
tags: [Docker, ç½‘ç»œé—®é¢˜, è¿æ¥é”™è¯¯, é•œåƒæ‹‰å–, Docker Hub, æ•…éšœæ’æŸ¥]
keywords: [Docker, è¿æ¥é”™è¯¯, è¶…æ—¶, é•œåƒæ‹‰å–, Docker Hub, è®¤è¯å¤±è´¥, é•œåƒåŠ é€Ÿå™¨, ç½‘ç»œé—®é¢˜, æ•…éšœæ’æŸ¥, CMD JSON]
description: è§£å†³ Docker åœ¨æ‹‰å–é•œåƒæ—¶å¸¸è§çš„è¿æ¥é”™è¯¯ã€æˆæƒå¤±è´¥å’Œè¶…æ—¶é—®é¢˜ï¼ŒåŒ…æ‹¬ç½‘ç»œæ£€æŸ¥ã€é…ç½®é•œåƒåŠ é€Ÿå™¨ã€æ¸…ç†ç¼“å­˜å’Œå¤„ç† CMD æŒ‡ä»¤è­¦å‘Šç­‰æ–¹æ³•ã€?
---

<!-- truncate -->

# Dockerè¿æ¥é”™è¯¯è§£å†³

> [!WARNING]
>
> ERROR: failed to solve: xxx: failed to resolve source metadata for docker.io/library/xxx: failed to authorize: failed to fetch oauth token: Post "https://auth.docker.io/token": dial tcp [2a03:2880:f131:83:face:b00c:0:25de]:443: connectex: A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond.

![image-20241108224528063](https://cdn.jsdelivr.net/gh/wwwqqqzzz/Image/img/image-20241108224528063.png)

â€?è¿™ä¸ªé”™è¯¯é€šå¸¸æ˜¯ç”±äºç½‘ç»œè¿æ¥é—®é¢˜å¯¼è‡´çš„ï¼Œå°¤å…¶æ˜¯å½?Docker å°è¯•ä»?Docker Hub æ‹‰å–é•œåƒæ—¶æœªèƒ½è·å¾—æˆæƒæˆ–è¯·æ±‚è¶…æ—¶ã€‚å¯èƒ½çš„åŸå› å’Œè§£å†³æ–¹æ³•å¦‚ä¸‹ï¼š

1. **ç½‘ç»œè¿æ¥é—®é¢˜**ï¼?
   - è¯¥é”™è¯¯çš„æ ¹æœ¬åŸå› å¯èƒ½æ˜¯ç½‘ç»œé—®é¢˜ï¼Œå¯¼è‡´ Docker æ— æ³•è¿æ¥åˆ?Docker Hubã€‚å¯ä»¥å°è¯•æ›´æ¢ç½‘ç»œç¯å¢ƒï¼Œä¾‹å¦‚è¿æ¥åˆ°ä¸åŒçš„ Wi-Fi æˆ–å°è¯•æœ‰çº¿ç½‘ç»œã€?
   - ä½¿ç”¨ VPN å·¥å…·ï¼ˆå¦‚æœç½‘ç»œé™åˆ¶å¯¼è‡´è®¿é—?Docker Hub å‡ºç°é—®é¢˜ï¼‰ï¼Œå°è¯•é€šè¿‡ VPN è¿æ¥åé‡æ–°æ‰§è¡Œå‘½ä»¤ã€?

2. **é•œåƒä»£ç†è®¾ç½®**ï¼?
   
   - é…ç½® Docker é•œåƒåŠ é€Ÿå™¨ï¼Œæ¯”å¦‚é˜¿é‡Œäº‘æˆ–å…¶ä»–å›½å†…çš„ Docker é•œåƒæœåŠ¡æä¾›å•†ã€‚é…ç½®æ–¹æ³•å¦‚ä¸‹ï¼š
     - æ‰“å¼€ Docker Desktopï¼Œè¿›å…?**Settings > Docker Engine**ã€?
     - åœ?JSON é…ç½®ä¸­æ·»åŠ é•œåƒåŠ é€Ÿå™¨é…ç½®ï¼Œä¾‹å¦‚ï¼š
       ```json
       "registry-mirrors": ["https://registry.docker-cn.com"]
       ```
       
       æˆ–è€?
       
       ```json
        "registry-mirrors": [
           "https://mirror.aliyuncs.com"
         ]
       ```
       
     - ä¿å­˜å¹¶é‡å?Dockerã€?
     - ![image-20241108224727376](https://cdn.jsdelivr.net/gh/wwwqqqzzz/Image/img/image-20241108224727376.png)
   
3. **æ¸…ç† Docker ç¼“å­˜**ï¼?
   - æœ‰æ—¶ Docker çš„ç¼“å­˜å¯èƒ½å¯¼è‡´æ„å»ºå¤±è´¥ã€‚å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤æ¸…ç† Docker çš„æ„å»ºç¼“å­˜ï¼š
     ```shell
     docker builder prune
     ```
   - æ¸…ç†ç¼“å­˜åï¼Œé‡æ–°å°è¯•æ„å»ºé•œåƒã€?

4. **æ‰‹åŠ¨æ‹‰å–é•œåƒ**ï¼?
   
   - å¯ä»¥å°è¯•æ‰‹åŠ¨æ‹‰å–é•œåƒ `xxx`
     
     ```shell
     docker pull xxx
     ```
     
     ![image-20241108225711554](https://cdn.jsdelivr.net/gh/wwwqqqzzz/Image/img/image-20241108225711554.png)
     
     > [!CAUTION]
     >
     > > ```shell
     > > docker pull xxx Error response from daemon: Get "https://registry-1.docker.io/v2/": net/http: request canceled while waiting for connection (Client.Timeout exceeded while awaiting headers)
     > > ```
     > >
     > > >è¿™ä¸ªé”™è¯¯è¡¨æ˜ Docker åœ¨è¿æ?Docker Hub æ—¶é‡åˆ°äº†è¶…æ—¶é—®é¢˜ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¯ä»¥å¸®åŠ©è§£å†³æ­¤é—®é¢˜çš„æ–¹æ³•ï¼š
     > >
     > > ### 1. **æ£€æŸ¥ç½‘ç»œè¿æ?*
     > >
     > >    - ç¡®ä¿ä½ æœ‰ç¨³å®šçš„äº’è”ç½‘è¿æ¥ï¼Œç‰¹åˆ«æ˜¯å¯ä»¥è®¿é—®å›½å¤–çš„ç½‘ç»œã€?
     > >    - å¦‚æœç½‘ç»œè¿æ¥ä¸ç¨³å®šæˆ–å—åˆ°é™åˆ¶ï¼Œå¯ä»¥å°è¯•åˆ‡æ¢åˆ°ä¸åŒçš?Wi-Fiã€é‡å¯è·¯ç”±å™¨ï¼Œæˆ–è€…å°è¯•ä½¿ç”¨æ‰‹æœºçƒ­ç‚¹ã€?
     > >
     > > ### 2. **æµ‹è¯• Docker Hub æ˜¯å¦å¯è®¿é—?*
     > >
     > >    - å¯ä»¥åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ä»¥ä¸‹åœ°å€ï¼Œç¡®è®¤æ˜¯å¦å¯ä»¥è®¿é—?Docker Hub çš?API æ¥å£ï¼?
     > >
     > >      ```
     > >      https://registry-1.docker.io/v2/
     > >      ```
     > >
     > >    - å¦‚æœå¯ä»¥è®¿é—®ï¼Œè¯´æ˜ç½‘ç»œè¿æ¥åˆ° Docker Hub æ­£å¸¸ã€?
     > >
     > >      >![image-20241108230129606](https://cdn.jsdelivr.net/gh/wwwqqqzzz/Image/img/image-20241108230129606.png)
     > >      >
     > >      >è¿™ä¸ªé”™è¯¯è¡¨ç¤º Docker å®¢æˆ·ç«¯åœ¨å°è¯•è¿æ¥åˆ?Docker Hub æ—¶æ²¡æœ‰æ­£ç¡®å®Œæˆèº«ä»½éªŒè¯ã€‚å¯ä»¥å°è¯•ä»¥ä¸‹æ–¹æ³•æ¥è§£å†³æ­¤é—®é¢˜ï¼š
     > >      >
     > >      >### 1. **ç™»å½• Docker Hub**
     > >      >
     > >      >   - ç¡®ä¿ä½ å·²ç™»å½• Docker Hubã€‚å¯ä»¥åœ¨å‘½ä»¤è¡Œä¸­ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ç™»å½•ï¼?
     > >      >
     > >      >     ```bash
     > >      >     docker login
     > >      >     ```
     > >      >
     > >      >   - ç³»ç»Ÿä¼šæç¤ºä½ è¾“å…¥ Docker Hub çš„ç”¨æˆ·åå’Œå¯†ç ã€‚è¾“å…¥æ­£ç¡®çš„å‡­æ®åï¼ŒDocker å®¢æˆ·ç«¯å°†å­˜å‚¨ä½ çš„ç™»å½•ä¿¡æ¯ï¼Œå†æ¬¡æ‰§è¡Œæ‹‰å–é•œåƒçš„æ“ä½œåº”è¯¥å°±ä¸ä¼šé‡åˆ°èº«ä»½éªŒè¯é—®é¢˜ã€?
     > >      >
     > >      >### 2. **æ£€æŸ?Docker Hub è´¦å·çŠ¶æ€?*
     > >      >
     > >      >   - å¦‚æœä½ æœªæ³¨å†Œ Docker Hub è´¦å·ï¼Œå¯ä»¥å…ˆåˆ?[Docker Hub æ³¨å†Œé¡µé¢](https://hub.docker.com/) åˆ›å»ºä¸€ä¸ªå…è´¹è´¦å·ã€?
     > >      >   - ç¡®ä¿è´¦å·æœªè¢«ç¦ç”¨æˆ–å—é™ï¼Œå¦åˆ™å¯èƒ½ä¼šå½±å“å¯¹é•œåƒçš„æ‹‰å–æ“ä½œã€?
     > >      >
     > >      >### 3. **é‡æ–°å°è¯•æ‹‰å–é•œåƒ**
     > >      >
     > >      >   - ç™»å½•æˆåŠŸåï¼Œå†æ¬¡å°è¯•æ‹‰å–é•œåƒï¼?
     > >      >
     > >      >     ```bash
     > >      >     docker pull xxx
     > >      >     ```
     > >      >
     > >      >     ![image-20241108230256370](https://cdn.jsdelivr.net/gh/wwwqqqzzz/Image/img/image-20241108230256370.png)
     > >      >
     > >      >### 4. **æ£€æŸ?Docker é…ç½®æ–‡ä»¶**
     > >      >
     > >      >   - å¦‚æœå·²ç™»å½•ï¼Œä½†ä»ç„¶é‡åˆ°ç›¸åŒé”™è¯¯ï¼Œå¯ä»¥æ£€æŸ?Docker çš„é…ç½®æ–‡ä»¶ï¼ˆä¸€èˆ¬ä½äº?`~/.docker/config.json`ï¼‰ï¼Œç¡®ä¿å…¶ä¸­çš?`auths` éƒ¨åˆ†åŒ…å« `docker.io` æˆ?`registry-1.docker.io` çš„ç™»å½•ä¿¡æ¯ã€?
     > >      >   - å¦‚æœæ²¡æœ‰ï¼Œå¯ä»¥å°è¯•åˆ é™¤æ­¤æ–‡ä»¶å¹¶é‡æ–°ç™»å½•ï¼Œæˆ–è€…æ‰‹åŠ¨æ·»åŠ?Docker Hub çš„è®¤è¯ä¿¡æ¯ã€?
     > >      >
     > >      >### 5. **æ›´æ–° Docker Desktop**
     > >      >
     > >      >   - ç¡®ä¿ Docker Desktop æ˜¯æœ€æ–°ç‰ˆæœ¬ã€‚è¾ƒæ—§çš„ç‰ˆæœ¬å¯èƒ½ä¼šæœ‰ä¸€äº›å·²çŸ¥çš„èº«ä»½éªŒè¯é—®é¢˜ã€?
     > >
     > > ### 4. **å¢åŠ  Docker çš„è¶…æ—¶æ—¶é—?*
     > >
     > >    - æœ‰æ—¶æ˜¯å› ä¸ºé»˜è®¤çš„è¶…æ—¶æ—¶é—´ä¸å¤Ÿã€‚å¯ä»¥åœ¨ Docker CLI å‘½ä»¤ä¸­å¢åŠ è¶…æ—¶è®¾ç½®ï¼š
     > >
     > >      ```bash
     > >      docker --config ~/.docker pull xxx
     > >      ```
     > >
     > >    - æˆ–è€…å°è¯•åœ¨ Docker çš„é…ç½®æ–‡ä»¶ä¸­æ‰‹åŠ¨å¢åŠ  `default-timeout` çš„è®¾ç½®ï¼ˆä¾‹å¦‚ï¼Œæ”¹ä¸?300 ç§’ï¼‰ã€?
     > >
     > > ### 5. **é‡å¯ Docker æœåŠ¡**
     > >
     > >    - åœ?Docker Desktop ä¸­ç‚¹å‡»é‡å¯æŒ‰é’®ï¼Œæˆ–è€…åœ¨å‘½ä»¤è¡Œä¸­é€šè¿‡ä»¥ä¸‹å‘½ä»¤é‡å¯ Docker æœåŠ¡ï¼?
     > >
     > >      ```bash
     > >      sudo systemctl restart docker  # Linux ç”¨æˆ·
     > >      ```
     > >
     > > ### 6. **æ‰‹åŠ¨æ‹‰å–æ›¿ä»£ç‰ˆæœ¬æˆ–ä½¿ç”¨æœ¬åœ°é•œåƒ?*
     > >
     > >    - å°è¯•æ‹‰å–å…¶ä»–ç‰ˆæœ¬çš?Node é•œåƒï¼Œæˆ–ä½¿ç”¨æœ¬åœ°çš?Node é•œåƒæ¥å®Œæˆæ„å»ºï¼ˆå¦‚æœå·²æœ‰å…¶ä»–ç‰ˆæœ¬çš?Node é•œåƒï¼‰ã€?
     > >
     > > è¿™äº›æ–¹æ³•é€šå¸¸å¯ä»¥æœ‰æ•ˆè§£å†³å› ç½‘ç»œé—®é¢˜å¯¼è‡´çš„ Docker è¶…æ—¶é”™è¯¯ã€?
     
     
   
   - ç„¶åå†æ„å»ºé•œåƒï¼š
   
     ```shell
     docker build -t hello-docker .
     ```
   
     > [!WARNING]
     >
     > ![image-20241108230525319](https://cdn.jsdelivr.net/gh/wwwqqqzzz/Image/img/image-20241108230525319.png)
     >
     > è¿™ä¸ªè­¦å‘Šæç¤ºæ˜¯å› ä¸ºåœ¨ Dockerfile ä¸­ä½¿ç”¨äº† `CMD` æŒ‡ä»¤æ¥å¯åŠ¨ç¨‹åºï¼Œä½†æ˜¯ `CMD` çš„å‚æ•°æ²¡æœ‰ä½¿ç”?JSON æ ¼å¼ã€‚JSON æ ¼å¼åœ¨æŸäº›åœºæ™¯ä¸‹å¯ä»¥é¿å…æ“ä½œç³»ç»Ÿä¿¡å·å¼•èµ·çš„æ„å¤–è¡Œä¸ºï¼Œå°¤å…¶æ˜¯åœ¨å®¹å™¨çš„ä¿¡å·ä¼ é€’å’Œè¿›ç¨‹æ§åˆ¶æ–¹é¢æ›´ä¸ºå¯é ã€?
     >
     > ### è§£å†³æ–¹æ³•
     >
     > å°?`CMD` æŒ‡ä»¤ä»å­—ç¬¦ä¸²å½¢å¼æ”¹ä¸º JSON æ•°ç»„å½¢å¼ã€‚å…·ä½“ä¿®æ”¹æ–¹æ³•å¦‚ä¸‹ï¼š
     >
     > å‡è®¾ä½ çš„ Dockerfile å†…å®¹å¦‚ä¸‹ï¼?
     >
     > ```dockerfile
     > FROM node:14-alpine
     > COPY index.js /index.js
     > CMD node /index.js
     > ```
     >
     > å°?`CMD` ä¿®æ”¹ä¸?JSON æ•°ç»„æ ¼å¼ï¼?
     >
     > ```dockerfile
     > FROM node:14-alpine
     > COPY index.js /index.js
     > CMD ["node", "/index.js"]
     > ```
     >
     > ### ä¸ºä»€ä¹ˆä½¿ç”?JSON æ ¼å¼
     >
     > - JSON æ ¼å¼ `CMD ["node", "/index.js"]` ç›´æ¥æ‰§è¡Œå‘½ä»¤ï¼Œä¸ä¾èµ– shellï¼Œä»è€Œé¿å…ä¿¡å·ä¼ é€’é—®é¢˜ã€?
     > - å­—ç¬¦ä¸²æ ¼å¼?`CMD node /index.js` é»˜è®¤é€šè¿‡ shell (`/bin/sh -c`) æ‰§è¡Œï¼Œå¯èƒ½ä¼šå¯¼è‡´åœ¨å¤„ç†ä¿¡å·ï¼ˆå¦?SIGTERMï¼‰æ—¶è¡Œä¸ºä¸ä¸€è‡´ã€?
     >
     > è¿™æ ·ä¿®æ”¹åï¼ŒDockerfile çš„è­¦å‘Šåº”è¯¥ä¼šæ¶ˆå¤±ï¼Œå¹¶ä¸”åœ¨æ‰§è¡Œæ—¶ä¹Ÿä¼šæ›´åŠ å¯é ã€?
   
     
   
5. **æ£€æŸ?Docker æœåŠ¡çŠ¶æ€?*ï¼?
   - ç¡®ä¿ Docker Desktop æœåŠ¡æ­£åœ¨æ­£å¸¸è¿è¡Œï¼Œå»ºè®®å°è¯•é‡æ–°å¯åŠ?Docker Desktopã€?
   





docker run -d \  --name cflow \ --publish 5230:5230 \  --volume C:\Users\wang\Desktop\cflow-blog\memos:/var/opt/memos \  cflow:latest \  --mode prod
